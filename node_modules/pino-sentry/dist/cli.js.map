{"version":3,"file":"cli.js","sourceRoot":"","sources":["../src/cli.ts"],"names":[],"mappings":";;;;;;AAEA,0DAAgC;AAEhC,qCAAqC;AACrC,2CAAgD;AAEhD,iBAAiB;AACjB,SAAS,IAAI;IACX,mBAAO;QACL,wBAAwB;SACvB,MAAM,CAAC,iBAAiB,EAAE,qCAAqC,CAAC;SAChE,MAAM,CAAC,iCAAiC,EAAE,oBAAoB,CAAC;SAC/D,MAAM,CAAC,+BAA+B,EAAE,gBAAgB,CAAC;SACzD,MAAM,CAAC,sBAAsB,EAAE,4BAA4B,CAAC;SAC5D,MAAM,CAAC,gCAAgC,EAAE,6EAA6E,CAAC;SACvH,MAAM,CAAC,wCAAwC,EAAE,qDAAqD,CAAC;SACvG,MAAM,CAAC,oBAAoB,EAAE,sCAAsC,CAAC;SACpE,MAAM,CAAC,mCAAmC,EAAE,8EAA8E,CAAC;SAC3H,MAAM,CAAC,qBAAqB,EAAE,oEAAoE,CAAC;SACnG,MAAM,CAAC,qBAAqB,EAAE,sDAAsD,CAAC;SACrF,MAAM,CAAC,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,WAAW,EAAE,KAAK,EAAE,UAAU,EAAE,cAAc,EAAE,IAAI,EAAE,QAAQ,EAAE,cAAc,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE;QAC9H,IAAI;YACF,MAAM,WAAW,GAAG,6BAAiB,CAAC;gBACpC,GAAG;gBACH,UAAU;gBACV,WAAW;gBACX,KAAK;gBACL,UAAU;gBACV,cAAc;gBACd,IAAI;gBACJ,QAAQ;gBACR,cAAc;gBACd,OAAO;gBACP,KAAK;aACN,CAAC,CAAC;YACH,iBAAiB;YACjB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACnC,sBAAsB;YACtB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC;SACnD;QAAC,OAAO,KAAK,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;YACpC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACjB;IACH,CAAC,CAAC,CAAC;IAEL,mBAAO,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC9B,CAAC;AAED,IAAI,EAAE,CAAC","sourcesContent":["#!/usr/bin/env node\n\nimport program from 'commander';\n\n// import pkg from '../package.json';\nimport { createWriteStream } from './transport';\n\n// main cli logic\nfunction main() {\n  program\n    // .version(pkg.version)\n    .option('-d, --dsn <dsn>', 'Your Sentry DSN or Data Source Name')\n    .option('-e, --environment <environment>', 'Sentry environment')\n    .option('-n, --serverName <serverName>', 'Transport name')\n    .option('-dm, --debug <debug>', 'Turns debug mode on or off')\n    .option('-sr, --sampleRate <sampleRate>', 'Sample rate as a percentage of events to be sent in the range of 0.0 to 1.0')\n    .option('-mb, --maxBreadcrumbs <maxBreadcrumbs>', 'Total amount of breadcrumbs that should be captured')\n    .option('-di, --dist <dist>', 'Sets the distribution for all events')\n    .option('--maxValueLength <maxValueLength>', 'Maximum number of chars a single value can have before it will be truncated.')\n    .option('--release <release>', 'The release identifier used when uploading respective source maps.')\n    .option('-l, --level <level>', 'The minimum level for a log to be reported to Sentry')\n    .action(({ dsn, serverName, environment, debug, sampleRate, maxBreadcrumbs, dist, logLevel, maxValueLength, release, level }) => {\n      try {\n        const writeStream = createWriteStream({\n          dsn,\n          serverName,\n          environment,\n          debug,\n          sampleRate,\n          maxBreadcrumbs,\n          dist,\n          logLevel,\n          maxValueLength,\n          release,\n          level,\n        });\n        // Echo to stdout\n        process.stdin.pipe(process.stdout);\n        // Pipe to writeStream\n        process.stdin.pipe(writeStream);\n        console.info('[pino-sentry] Logging Initialized');\n      } catch (error) {\n        console.log('[pino-sentry]', error);\n        process.exit(1);\n      }\n    });\n\n  program.parse(process.argv);\n}\n\nmain();\n"]}